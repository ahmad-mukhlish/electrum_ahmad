appId: com.electrum.ahmad.electrum_ahmad
---
# Home Setup Flow
# Purpose: Navigate to home screen from any state
# Handles both logged-in and logged-out states

# Step 1: Launch the app
- launchApp

# Step 2: Wait for app to stabilize
- waitForAnimationToEnd

# Step 3: Check if user is already logged in
# If "Home bottom" (mobile) or "Home sidebar" (web) is visible, we're on home
# If not, we need to login

- runFlow:
    when:
      notVisible:
        text: ".*Home bottom.*"
    commands:
      # Check if on login screen or need to navigate to login
      - runFlow:
          when:
            notVisible:
              text: ".*Login button.*"
          commands:
            # Need to logout first (might be on another screen)
            - runFlow:
                when:
                  visible:
                    text: ".*Home sidebar.*"
                commands:
                  # On web home, need to logout
                  - tapOn:
                      text: "Profile"
                  - waitForAnimationToEnd
                  - tapOn:
                      text: ".*Logout button.*"
                  - waitForAnimationToEnd

      # Now login with seeded credentials
      - runFlow:
          when:
            visible:
              text: ".*Login button.*"
          commands:
            - tapOn:
                text: ".*Login email.*"
            - inputText: "ahmad.mukhlish.saputra@gmail.com"
            - tapOn:
                text: ".*Login password.*"
            - inputText: "CobaCoba123"
            - tapOn:
                text: ".*Login button.*"
            - waitForAnimationToEnd

# Step 4: Verify we're on home screen (works for both mobile and web)
- assertVisible:
    text: ".*Home screen.*"
