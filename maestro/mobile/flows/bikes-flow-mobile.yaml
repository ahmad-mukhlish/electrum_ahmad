appId: com.electrum.ahmad.electrum_ahmad
---
# Mobile Bike Screen Tests
# Tests bike screen functionality on mobile platform

# ===========================
# Entry and Basic Navigation
# ===========================

# Setup: Navigate to bike screen
- runFlow: ../../common/bikes-setup.yaml

# Assert: Bikes list is visible
- runFlow: ../../common/bikes-assert-list.yaml

# ===========================
# Search Flow - Valid Search
# ===========================

# Scroll to ensure bike cards are visible
- scrollUntilVisible:
    element:
      text: ".*Bike card.*"

# Search for "H1"
- tapOn:
    text: ".*Bike search.*"
- inputText: "H1"
- pressKey: Enter
- waitForAnimationToEnd

# Assert: Bike cards still visible (filtered results)
- assertVisible:
    text: ".*Bike card.*"

# ===========================
# Search Flow - Invalid Search (Empty State)
# ===========================

# Clear search and search for nonsense
- tapOn:
    text: ".*Bike search.*"
- eraseText
- inputText: "testesttestste"
- pressKey: Enter
- waitForAnimationToEnd

# Assert: Empty state visible
- runFlow: ../../common/bikes-assert-empty.yaml

# Reset from empty state
- tapOn:
    text: ".*Empty reset.*"
- waitForAnimationToEnd

# Assert: Bikes list returns
- runFlow: ../../common/bikes-assert-list.yaml

# ===========================
# Filter: Available Only
# ===========================

# Open filter sheet
- tapOn:
    text: ".*Filter button.*"
- waitForAnimationToEnd

# Select Available Only
- tapOn:
    text: ".*Filter available.*"

# Apply filter
- tapOn:
    text: ".*Filter apply.*"
- waitForAnimationToEnd

# Assert: Bikes list visible
- runFlow: ../../common/bikes-assert-list.yaml

# Assert: Available chip visible
- assertVisible:
    text: ".*Chip available.*"

# ===========================
# Filter: Price Range - Premium
# ===========================

# Open filter sheet
- tapOn:
    text: ".*Filter button.*"
- waitForAnimationToEnd

# Select Premium price range
- tapOn:
    text: ".*Filter premium.*"

# Apply filter
- tapOn:
    text: ".*Filter apply.*"
- waitForAnimationToEnd

# Assert: Bikes list visible
- runFlow: ../../common/bikes-assert-list.yaml

# Assert: Premium chip visible
- assertVisible:
    text: ".*Chip premium.*"

# ===========================
# Filter: Price Range - Deluxe (Empty Result)
# ===========================

# Open filter sheet
- tapOn:
    text: ".*Filter button.*"
- waitForAnimationToEnd

# Select Deluxe price range
- tapOn:
    text: ".*Filter deluxe.*"

# Apply filter
- tapOn:
    text: ".*Filter apply.*"
- waitForAnimationToEnd

# Assert: Empty state visible
- runFlow: ../../common/bikes-assert-empty.yaml

# Assert: Premium chip still visible (from previous filter)
- assertVisible:
    text: ".*Chip premium.*"

# Remove Premium chip to restore bikes
- tapOn:
    text: ".*Chip premium.*"
- waitForAnimationToEnd

# Assert: Bikes list returns
- runFlow: ../../common/bikes-assert-list.yaml

# ===========================
# Filter: Range Km - Long Range
# ===========================

# Open filter sheet
- tapOn:
    text: ".*Filter button.*"
- waitForAnimationToEnd

# Select Long Range
- tapOn:
    text: ".*Filter long.*"

# Apply filter
- tapOn:
    text: ".*Filter apply.*"
- waitForAnimationToEnd

# Assert: Bikes list visible
- runFlow: ../../common/bikes-assert-list.yaml

# Assert: Range chip visible
- assertVisible:
    text: ".*Chip range.*"

# ===========================
# Filter: Reset
# ===========================

# Open filter sheet
- tapOn:
    text: ".*Filter button.*"
- waitForAnimationToEnd

# Click Reset
- tapOn:
    text: ".*Filter reset.*"
- waitForAnimationToEnd

# Assert: Bikes list visible (all bikes)
- runFlow: ../../common/bikes-assert-list.yaml
